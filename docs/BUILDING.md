# Building and Testing

IMPORTANT: Do not use `swift build` / `swift test` from the command line for this project.

This repository contains iOS frameworks that depend on UIKit. CLI builds with SwiftPM target macOS toolchains by default and will fail or behave inconsistently (e.g., platform resolution issues with transitive dependencies like `SwiftSoup`).

## Build the Swift Package (Framework + Tests)

- Always build using Xcode.
- Open the package workspace generated by SwiftPM:
  - Path: `.swiftpm/xcode/package.xcworkspace`
  - If the workspace does not exist yet, open `Package.swift` in Xcode once to generate it.
- In Cursor, use the ios-devloop MCP to build and run tests against the iOS simulator. Do not invoke CLI builds.

## Build the Demo App

- Open the demo Xcode project:
  - Path: `Demo/MarkdownEditor.xcodeproj`
- Select an iOS Simulator and run.

## Local Dependency on lexical-ios

During active development, `MarkdownEditor` should point to your local `lexical-ios` checkout via path dependency:

- In `MarkdownEditor/Package.swift`:
  - Use: `.package(path: "../lexical-ios")`
  - Keep product references with `package: "lexical-ios"`.

## Summary

- Never use `swift build` / `swift test` here.
- Always build with Xcode using `.swiftpm/xcode/package.xcworkspace` for the framework/tests.
- Use `Demo/MarkdownEditor.xcodeproj` for the demo app.
- In Cursor, use the ios-devloop MCP for builds and tests. 